# Do not modify this file!  It was generated by ‘nixos-generate-config’
# and may be overwritten by future invocations.  Please make changes
# to /etc/nixos/configuration.nix instead.
{ config, pkgs, inputs,... }:

{

  imports =
    [ 
      inputs.nixos-hardware.nixosModules.common-gpu-nvidia
    ];

  hardware = {
    graphics.enable = true;
    opengl = {
      enable = true;
      driSupport = true;
      driSupport32Bit = true;
    };
    bluetooth = {
      enable = true;
      package = pkgs.bluez;
      powerOnBoot = true;
    };

    nvidia = {
      modesetting.enable = true;
      open = false;
      package = config.boot.kernelPackages.nvidiaPackages.stable;

      powerManagement.enable = true;
      nvidiaSettings = true;
      prime = {
          sync.enable = true;
          nvidiaBusId = "PCI:65:0:0";
          amdgpuBusId = "PCI:01:0:0"; 
      };
    };
  };
}
